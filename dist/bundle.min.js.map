{"version":3,"sources":["script.js"],"names":["form","document","querySelector","output","executeQuery","e","preventDefault","queryText","search","value","queryOptions","cors","endpoint","Object","keys","forEach","key","response","fetch","json","results","query","pages","addToDOM","url","toAppend","reduce","a","b","pageid","title","extract","innerHTML","addEventListener"],"mappings":";;AAAA,MAAMA,OAAOC,SAASC,aAAT,CAAuB,MAAvB,CAAb;AACA,MAAMC,SAASF,SAASC,aAAT,CAAuB,SAAvB,CAAf;;AAEA,eAAeE,YAAf,CAA4BC,CAA5B,EAA+B;AAC7BA,IAAEC,cAAF;;AAEA,QAAMC,YAAYP,KAAKQ,MAAL,CAAYC,KAA9B;AACA,QAAMC,eAAe;AACnB,cAAU,OADS;AAEnB,cAAU,MAFS;AAGnB,qBAAiB,GAHE;AAInB,YAAQ,UAJW;AAKnB,eAAW,KALQ;AAMnB,mBAAe,GANI;AAOnB,mBAAe,GAPI;AAQnB,eAAW,GARQ;AASnB,iBAAa,QATM;AAUnB,oBAAgB,GAVG;AAWnB,gBAAY,IAXO;AAYnB,iBAAc,GAAEH,SAAU;AAZP,GAArB;;AAeA;AACA,QAAMI,OAAO,sCAAb;AACA,MAAIC,WAAY,GAAED,IAAK,qCAAvB;AACAE,SAAOC,IAAP,CAAYJ,YAAZ,EAA0BK,OAA1B,CAAkCC,OAAOJ,YAAa,IAAGI,GAAI,IAAGN,aAAaM,GAAb,CAAkB,EAAlF;;AAEA;AACA,QAAMC,WAAW,MAAMC,MAAMN,QAAN,CAAvB;AACA,QAAMO,OAAO,MAAMF,SAASE,IAAT,EAAnB;AACA,QAAMC,UAAUD,KAAKE,KAAL,CAAWC,KAA3B;;AAEAC,WAASH,OAAT;AACD;;AAED,SAASG,QAAT,CAAkBH,OAAlB,EAA2B;AACzB,QAAMI,MAAM,kCAAZ;;AAEA,QAAMC,WAAWL,QAAQM,MAAR,CAAe,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACxC,WAAOD,IAAK;iBACCH,MAAMI,EAAEC,MAAO;;gBAEhBD,EAAEE,KAAM;eACTF,EAAEG,OAAQ;;;OAJrB;AAQD,GATgB,EASd,EATc,CAAjB;;AAWA5B,SAAO6B,SAAP,GAAmBP,QAAnB;AACD;;AAEDzB,KAAKiC,gBAAL,CAAsB,QAAtB,EAAgC7B,YAAhC","file":"bundle.min.js","sourcesContent":["const form = document.querySelector('form');\r\nconst output = document.querySelector('.output');\r\n\r\nasync function executeQuery(e) {\r\n  e.preventDefault();\r\n\r\n  const queryText = form.search.value;\r\n  const queryOptions = {\r\n    \"action\": \"query\",\r\n    \"format\": \"json\",\r\n    \"formatversion\": \"2\",\r\n    \"prop\": \"extracts\",\r\n    \"exlimit\": \"max\",\r\n    \"explaintext\": \"1\",\r\n    \"exsentences\": \"1\",\r\n    \"exintro\": \"1\",\r\n    \"generator\": \"search\",\r\n    \"gsrnamespace\": \"0\",\r\n    \"gsrlimit\": \"10\",\r\n    \"gsrsearch\": `${queryText}`\r\n  };\r\n\r\n  // Build up the query URL using the options above\r\n  const cors = 'https://cors-anywhere.herokuapp.com/';\r\n  let endpoint = `${cors}https://en.wikipedia.org/w/api.php?`;\r\n  Object.keys(queryOptions).forEach(key => endpoint += `&${key}=${queryOptions[key]}`);\r\n\r\n  // Get the data, then process it into a nice usable array of objects.\r\n  const response = await fetch(endpoint);\r\n  const json = await response.json();\r\n  const results = json.query.pages;\r\n\r\n  addToDOM(results);\r\n}\r\n\r\nfunction addToDOM(results) {\r\n  const url = 'https://en.wikipedia.org/?curid=';\r\n\r\n  const toAppend = results.reduce((a, b) => {\r\n    return a + `\r\n      <a href=\"${url + b.pageid}\" target=\"_blank\">\r\n        <div class=\"result\">\r\n          <h2>${b.title}</h2>\r\n          <p>${b.extract}</p>\r\n        </div>\r\n      </a>\r\n      `;\r\n  }, '');\r\n\r\n  output.innerHTML = toAppend;\r\n}\r\n\r\nform.addEventListener('submit', executeQuery);"]}